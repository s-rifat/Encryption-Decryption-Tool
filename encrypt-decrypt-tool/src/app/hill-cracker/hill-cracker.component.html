<div>
  <h2>Hill Cipher Cracker (Known Plaintext Attack, 2x2)</h2>

  <p>Enter two known plaintext digrams and their corresponding ciphertext digrams.</p>
  <p>Example: Plaintext "HI" encrypts to "LM"</p>

  <div class="input-section">
    <div>
      <label for="plaintextArea">Plaintext (4 letters, e.g., 'ABCD'):</label>
      <input id="plaintextArea" [(ngModel)]="plaintext" (input)="onTextInput($event, 'plaintext')" maxlength="4" placeholder="e.g., 'PTHA'">
    </div>
    <div>
      <label for="ciphertextArea">Ciphertext (4 letters, e.g., 'LMNO'):</label>
      <input id="ciphertextArea" [(ngModel)]="ciphertext" (input)="onTextInput($event, 'ciphertext')" maxlength="4" placeholder="e.g., 'QEDM'">
    </div>
  </div>

  <div>
    <button (click)="crackKey()" [disabled]="plaintext.length !== 4 || ciphertext.length !== 4">Crack Key</button>
    <button (click)="generateValidPair()">Generate Valid Pair</button>
  </div>

  <div *ngIf="keyMatrixResult">
    <h3>Deduced Key Matrix (K):</h3>
    <div *ngIf="!errorMessage" class="key-matrix-display">
      <div>[{{ keyMatrixResult[0][0] }}, {{ keyMatrixResult[0][1] }}]</div>
      <div>[{{ keyMatrixResult[1][0] }}, {{ keyMatrixResult[1][1] }}]</div>
    </div>
  </div>
  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>
</div>